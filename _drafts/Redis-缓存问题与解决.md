---
title: Redis-缓存问题与解决
description: 通常
categories: 
 - code
tags:
 - redis
---

------

## 前言

​	

## 缓存预热

​	缓存预热是指，在应用服务上线之前，将相关的热数据加载到缓存系统中。以避免服务上线，大量请求涌入，导致数据库、应用服务器以及缓存服务器宕机。

### 发生现象

​	**Redis** 服务刚启动，主从间数据吞吐量较大，数据同步操作频度较高，数据库或应用服务迅速崩掉。

### 解决方案

1. 使用 **Nginx** + **Lua** 将访问情况上报到 **Kafka**。
2. 使用 **Storm** 等实时流计算引擎从 **Kafka** 中消费数据，实时统计出热点数据，利用 **LRU** 保存策略构建数据留存队列
3. 根据数据级别，**Redis** 优先加载热度较高的数据。

## 缓存雪崩

​	大量的缓存，集中在一段时间内失效，导致大量请求直接访问数据库。随着数据库请求激增，会造成数据库奔溃，应用系统无法提供服务。

### 发生现象

- 应用系统平稳运行过程中，忽然数据库连接激增，数据库崩溃
- 应用服务器无法及时请求，出现 **500** 响应，应用服务器崩溃
- **Redis** **CPU** 占用标高，服务器/集群崩溃

### 解决方案

- 构建多级缓存架构

  **Nginx** 缓存 + **Redis** 缓存 + **EhCache** 缓存

- 限流、降级


## 缓存击穿

### 发生现象

## 缓存穿透

### 发生现象

## 参考

​	\[2\] [钱文品. Redis 深度历险：核心原理与应用实践. 应用 4：四两拨千斤——HyperLogLog](<https://book.douban.com/subject/30227261/>)
